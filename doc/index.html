<h1>Проект QAPRS</h1>

<h3>Содержание</h3>
<a href="index.html#term">Список используемых терминов и сокращений</a><br>
<a href="index.html#wwed">Введение</a><br>
<a href="index.html#obs">Обоснование необходимости разработки</a><br>
<a href="index.html#tz">Постановка задачи</a><br>
<a href="index.html#tza">Анализ ТЗ</a><br>
<a href="struct.html">Разработка структур данных</a><br>
<a href="ports.html">Поддерживаемые типы портов</a><br>
<a href="configure.html">Настройка работы программы</a><br>
<a href="index.html#lnk">Список использованных источников</a><br>

<A NAME="term"><h3>Список используемых терминов и сокращений</h3>

<p align="justify">
APRS - Automatic Position(или Packet) Reporting System - это специальный вариант пакетной радиосвязи, протокол которого был зарегистрирован в 1992 году Бобом Брунинга (WB4APR).<br><br>

AGW - пакетное ядро SV2AGW<br><br>

AXIP - Стандарт передачи пакетов AX.25 по сети TCP/IP [4].<br><br>

Internet APRS Server - сервера в сети интернет, через которые возможен обмен сообщениями, прием и передача пакетов APRS, на них происходит накопление данных. Как правило все мировые APRS сервера объединены между собой и сообщение, полученное от IGATE на один из серверов, попадает на все остальные сервера.<br><br>

CALL - позывной радиостанции<br><br>

Digipeater (DIGI) - ретранслятор пакетов<br><br>

GPS - устройство, позволяющее определить свои точные координаты<br><br>

GATE - мост для передачи APRS пакетов на другие диапазоны<br><br>

IGATE - мост для передачи APRS пакетов на Internet APRS Server<br><br>

SID - номер от 0 до 15, добавляемый к позывному станции (например UA3MQJ-4). Используется для идентификации нескольких станций под одним позывным. Так же по SID в стандарте APRS можно определить тип и назначение станции (подвижная станция, GATE и т. д.). Если SID не указан, то считается, что он равен нулю.<br><br>

TNC - контроллер для управления работой модема и передатчика, подключается к компьютеру<br><br>

БД - база данных, как правило использующая для доступа к данным язык структурированных запросов SQL.<br><br>

Модем - устройство для модуляции/демодуляции сигнала по определенному протоколу (например Packet)<br><br>

Пакет APRS - пакет информации, соответствующий протоколу APRS (маяк, сообщение и т. д.), вне зависимости от транспортного протокола его передачи.<br><br>

Пакет AX.25 - пакет информации, соответствующий протоколу пакетной связи AX.25

Транспорт - протолок и среда, используемая для передачи пакетов APRS (например пакет AX.25 может быть передан по радиоканалу или по сети tcp/ip или в текстовом виде серверу Internet APRS).

</p>

<A NAME="wwed"><h3>Введение</h3>

<p align="justify">&nbsp;&nbsp;&nbsp;
APRS (Automatic Position(или Packet) Reporting System) - это специальный вариант пакетной радиосвязи, протокол которого был зарегистрирован в 1992 году Бобом Брунинга (WB4APR). От обычного пакетного радио APRS отличается двумя принципиальным позициям. Во-первых, это отображение карт и других данных и, во-вторых, использование протокола, который обновляет данные в реальном масштабе времени.
Любой объект просто посылает информацию, а все приемные станции ее регистрируют. В пакетной связи основная масса пользователей использует соединение точка-точка, которые носят обычно эпизодический характер. Это не позволяет контролировать события в реальном времени, где срок жизни информации очень короток. Сегодня APRS является самой большой в мире системой реального масштаба времени, с помощью которой можно следить, как за любым специальным событием, так и за критическими ситуациями.
</p>
<p align="justify">&nbsp;&nbsp;&nbsp;
Где находится движущийся объект (самолёт, судно, шар, авто, мотоцикл, бегун, собака)? Где радиомагазин, выезд из города? Какая погода в различных точках страны, города? Где ураган? Где DX? Чтобы отвечать на эти вопросы и ещё на много другие, APRS передаёт в автоматическое режиме данные о месте положения объекта и значение его физических параметров. Информация может передаваться несколькими путями. Это может быть любительское радио, как на КВ, так и на УКВ, CB, морской диапазон, сотовый телефон, модемное и выделенное соединение с Интернет. 
</p>

<p align="justify">&nbsp;&nbsp;&nbsp;
В состав элементов системы APRS входят:<br>
Объекты:<br><br>
- стационарные (радиолюбительские станции, не перемещаемые объекты - такие как вулкан, церковь, радиоклуб, место старта и т.д. и т.п.);<br><br>

- мобильные (все виды движущихся объектов, координаты которых постоянно меняются - такие как автомобили, грузовики, поезда, воздушные шары, самолёты, ураганы и т.д. и т.п.);<br><br>

- космические (международная космическая станция, радиолюбительские спутники и т.д. и т.п.). <br><br>
&nbsp;&nbsp;&nbsp;
Эти объекты могут обмениваться между собой короткими сообщениями(MESSAGE), формировать пакеты с информацией об их состоянии, выполнять тестовые команды в системе и отправлять сообщения на электронную почту.<br><br>

-информационные (погодные станции (WX) – специальные автоматические или с ручным вводом информации о метеорологических условиях в данной точке [3], телеметрия состояния систем ISS и т.д. и т.п.).<br><br>

- дигипитеры (Digipeater) – элементы сети, предназначенные для приёма и последующей передачи копии пакета полученного от объектов с целью увеличения площади информационного контроля. Изменения производится только в области Digipeater Addresses (Адреса дигипитеров) пакета с целью ограничения числа скачков и трассировки пути перемещения пакета.<br><br>

- гейты (GATE) – элементы сети, осуществляющие функцию передачу пакетов с одного диапазона на другой (УКВ - КВ, КВ - УКВ)<br><br>

- интернет Гейты (IGATE) – элемент сети осуществляющие функцию передачу пакетов с радиодиапазона в сеть INTERNET и передачу электронной почты на почтовые сервера (Е-mail).<br><br>

- сервер Интернет (INTERNET Server) – элемент сети, осуществляющий прием/передачу пакетов от IGATE, накопление пакетов, поиск и предоставление информации об объекте пользователям INTERNET в удобном виде и в различных ракурсах.
</p>

<p align="justify">&nbsp;&nbsp;&nbsp;
Особый интерес для радиолюбителей представляют наземные (GPS не обязателен) и мобильные объекты APRS . Чаще всего радиолюбительские APRS УКВ объекты базируются  на  GPS и трансиверах типа KENWOOD TМ-D700e и TH-d7e (носимая станция, применяются при пеших, велосипедных или мотоциклетных маршрутах). Также в качестве APRS объектов, как для мобильной, так и для стационарной работы используются КВ/УКВ трансиверы, соединённые с компьютером по управляющему интерфейсу и формирующим пакеты через звуковую карту, через TNC или специальными формирователями APRS пакетов на базе микроконтроллеров.
</p>

<p align="justify">&nbsp;&nbsp;&nbsp;
Важным элементом системы являются электронные географические карты. Они представляют собой графические файлы карт в форматах BMP, JPG, GIF и информационные файлы привязки координат. Станции, чьи координаты известны - отображаются на карте соответствующим символом (мобильная станция, стационарная, погодная). По карте имеется возможность определить расстояние. По каждой станции имеется возможность посмотреть краткую информацию.[1]
</p>


<A NAME="obs"><h3>Обоснование необходимости разработки</h3>

<p align="justify">&nbsp;&nbsp;&nbsp;
  В целях самосовершенствования в области программирования протоколов пакетных сетей, закрепления навыков разработки кроссплатформенных продуктов на базе c++ и qt, было принято решение о разработке собственного аналога программного продукта UI-View и его дополнительного функционала, предоставляемого различными плагинами.</p>

<p align="justify">&nbsp;&nbsp;&nbsp;
Почему именно APRS? На это есть несколько причин. Протокол APRS он является открытым и достаточно простым в реализации стандартом. Традиционно используемый для него транспорт - пакетный протокол AX.25 так же является простым и открытым стандартом (в отличие от, например, PACTOR и Winlink). Иногда для транспорта APRS используется BPSK модуляция, которая в реализации еще проще, чем пакет AX.25. При использовании протоколом APRS транспорта в виде AX.25 пакета, используются не все его возможности, а только один тип пакетов (без подтверждения и установки соединения). Это упрощает реализацию собственных модуляторов/демодуляторов пакетов, а так же дает опыт работы с самим протоколом AX.25, который может в последствии быть применен при разработке полноценных пакетных приложений.</p>


<p align="justify">&nbsp;&nbsp;&nbsp;
 Работа системы может быть обеспечена и без применения дополнительного оборудования, такого как пакетные модемы и контроллеры. В качестве модема может быть использована звуковая плата. Это позволяет любому радиолюбителю, работающему цифровыми видами связи, опробовать работу и с сетью APRS без дополнительных финансовых вложений. Так же можно войти в сеть APRS и вообще не имея никакой приемопередающей аппаратуры через Internet APRS сервера, но это лишь часть возможностей системы. Радиолюбителям намного интереснее использовать в качестве транспорта для APRS пакетов не арендуемые Internet соединения, радиоканал на любительских диапазонах.</p> 

<p align="justify">&nbsp;&nbsp;&nbsp;
Реализация своего проекта позволит лучше узнать и сам протокол APRS, практически закрепить навыки работы с сетевыми протоколами, освоить разработку модулей для работы с аппаратными устройствами (звуковые платы, последовательные порты). Так же, за последние годы появилось множество новинок в области сетевых сервисов, с которыми можно итегрировать сеть APRS, дополнить функциональные возможности применения сети, тем самым развить возможности и область применения протокола, привлечь дополнительных пользователей.
</p>

<A NAME="tz"><h3>Постановка задачи</h3>

<p align="justify">&nbsp;&nbsp;&nbsp;
 Разработать систему для работы в сети APRS.</p>
  
<p align="justify">&nbsp;&nbsp;&nbsp;
  Система должна корректно функционировать в многопортовой конфигурации, предоставлять удобный интерфейс для настройки всех функциональных частей продукта: параметры портов, параметры ретрансляции пакетов, параметры маршрутизации пакетов между портами и т. д.</p>
  
<p align="justify">&nbsp;&nbsp;&nbsp;
  Функциональные блоки системы должны быть веделены в отдельные модули: основной модуль - ядро системы; дополнительные модули - графическая оболочка для отображения карт, почтовая и прочие системы.</p>

<p align="justify">&nbsp;&nbsp;&nbsp;
  Для работы системы должно быть достаточно запустить модуль ядра. Ядро должно обеспечивать независимо от запущенных дополнительных модулей следующую функциональность:</p>
  <li> работа с физическими портами, драйверами пакетных ядер (например AGW), сетевыми портами (AXIP, APRS Internet Server), с реализацией приема и передачи UI пакетов протокола AX25, которого достаточно для работы протокола APRS (но не достаточно для работы полноценным пакетом AX25);</li>
  <li> поддержание списка портов: создание, модификация параметров, удаление;</li> 
  <li> все действия по настройке ядра не должны требовать его перезапуска и, по возможности, без разрыва соединений там, где это необходимо;</li>
  <li> поддержка удаленного конфигурирования;</li>
  <li> ведение журнала всех принятых пакетов;</li>
  <li> ведения журнала всех услышанных станций;</li>
  <li> ведение списка сообщений;</li>
  <li> ответ на APRS запросы (PING, DX и т. д.) а так же подтверждение о приеме сообщений (для сообщений, имеющих ID);</li>
  <li> ретрансляцию APRS пакетов на порте и между портами (при соответствующей настройке);</li>
  <li> выдачу APRS маяка станции с его координатами, текстом маяка, символом, интервалом, с возможностью уникальной настройки по всем перечисленным параметрам отдельно по каждому порту (порты на КВ и УКВ могут отличаться как символом станции, так и интервалом маяка).</li>

<A NAME="tza"><h3>Анализ ТЗ</h3>

<p align="justify">&nbsp;&nbsp;&nbsp;  
  Для реализации требований будет использоваться язык программирования с++ и графическая библиотека QT4. Кроме возможности разработки кроссплатформенного графического продукта, данная библиотека предоставляет еще и множество других классов, облегчающих разработку переносимого ПО: классы для работы с файлами, массивами и строками, для работы с сетью, базами данных и т. д.</p>

<p align="justify">&nbsp;&nbsp;&nbsp;  
  Для удобства работы и настройки ядра, для хранения параметров, принято решение хранить все настройки в базе данных. Тип базы данных SQLite (возможно потом и MySQL если будут большие объемы данных). Данный тип БД выбран по той причине, что не требуется дополнительный сервер БД - все функции работы с sql встраиваются в клиентскую часть, вся БД размещается в одном файле, БД является переносимой на другую платформу. Информация о подключении к БД (имя файла, тип базы) хранить в текстовом ini файле.</p>




<A NAME="lnk"><h3>Список использованных источников</h3>
1. <a href="http://aprs.qrz.ru">APRS.QRZ.RU</a><br>
2. <a href="APRS101.PDF">APRS Protocol Reference v.1.0.1</a><br>
3. <a href="AX25.2.2.pdf">AX.25 Link Access Protocol for Amateur Packet Radio 
4. <a href="rfc1226.txt">Internet Protocol Encapsulation of AX.25 Frames</a>v.2.2</a><br>



  